/*! Ben's jQuery UI Extensions - v1.0.2 - 2013-07-12
* https://github.com/bseth99/jquery-ui-extensions
* Copyright 2013 Ben Olson; Licensed MIT */
(function(t){function e(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function i(e){var i=null;e.onscroll=function(n){i||(i=setTimeout(function(){t.each(e.watch,function(){this._checkPositioning(n)}),i=null},300))},e.element.on("scroll",e.onscroll)}var n=/^(?:html)$/i,s=(Math.max,Math.abs,Math.round),o=/left|center|right/,r=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,u=/%$/,h={scrollers:[],getScroller:function(t){for(var e,i=0;this.scrollers.length>i;i++)if(this.scrollers[i].element[0]===t[0]){e=this.scrollers[i];break}return e},attach:function(t){var e;(e=this.getScroller(t.container))||(e={element:t.container,watch:[],onscroll:null},this.scrollers.push(e),i(e)),e.watch.push(t)},detach:function(t){var e;if(e=this.getScroller(t.container)){for(var i=0;e.watch.length>i;i++)if(e.watch[i]===t){e.watch.splice(i,1);break}0==e.watch.length&&e.element.off("scroll",e.onscroll)}}};t.widget("ui.scrollable",{version:"1.0.2",widgetEventPrefix:"scroll",options:{"in":null,out:null,direction:"both",offset:null},inView:!1,_create:function(){this.options.offset=this.options.offset||{top:0,left:0,bottom:0,right:0}},_init:function(){this.container&&h.detach(this),this.container=this.element.closest(":scrollable"+("both"==this.direction?"":"("+this.direction+")")),n.test(this.container[0].nodeName)&&(this.container=t(window)),h.attach(this),this._checkPositioning()},_destroy:function(){h.detach(this),this.container=null},_checkPositioning:function(t){var e=this.inView,i=this.position();this.inView=i.inside,this.inView?e||this._trigger("in",t,{container:this.container,element:this.element,position:i}):e&&this._trigger("out",t,{container:this.container,element:this.element,position:i})},position:function(){var i,n,s={top:this.container.scrollTop(),left:this.container.scrollLeft()},o=this.element.position(),r=t.extend({},this.options.offset),l=this.container.width(),a=this.container.height();return(r.vertical||r.y)&&(i=e([0,r.vertical||r.y],l,a),r.top=r.bottom=i[1]/2),(r.horizontal||r.x)&&(i=e([r.horizontal||r.x,0],l,a),r.left=r.right=i[0]/2),i=e([r.left||0,r.top||0],l,a),r.left=i[0],r.top=i[1],i=e([r.right||0,r.bottom||0],l,a),r.right=i[0],r.bottom=i[1],s.right=s.left+l-r.right,s.bottom=s.top+a-r.bottom,s.left+=r.left,s.top+=r.top,o.right=o.left+this.element.width(),o.bottom=o.top+this.element.height(),n={container:s,element:o,inside:!1,outside:!1,left:o.right<s.left,right:o.left>s.right,top:o.bottom<s.top,bottom:o.top>s.bottom},n.inside=!(n.left||n.right||n.top||n.bottom),n.outside=!n.inside,n},"goto":function(i){var n,u,h,i=i||{},c={},p=this.position(),m=this.container.width(),d=this.container.height(),f=this.element.outerWidth(),g=this.element.outerHeight(),v=this.options.direction,_=this.container[0]===window?t("html"):this.container;!i.onlyOutside||i.onlyOutside&&!this.inView?(t.each(["my","at"],function(){var t,e,n=(i[this]||"").split(" ");1===n.length&&(n=o.test(n[0])?n.concat(["center"]):r.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=r.test(n[1])?n[1]:"center",t=l.exec(n[0]),e=l.exec(n[1]),c[this]=[t?t[0]:0,e?e[0]:0],i[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]}),"right"===i.at[0]?p.element.left-=m:"center"===i.at[0]&&(p.element.left-=m/2),"bottom"===i.at[1]?p.element.top-=d:"center"===i.at[1]&&(p.element.top-=d/2),u=e(c.at,m,d),p.element.left-=u[0],p.element.top-=u[1],h=e(c.my,f,g),"right"===i.my[0]?p.element.left+=f:"center"===i.my[0]&&(p.element.left+=f/2),"bottom"===i.my[1]?p.element.top+=g:"center"===i.my[1]&&(p.element.top+=g/2),p.element.left-=h[0],p.element.top-=h[1],n={},("both"==v||"vertical"==v)&&(n.scrollLeft=s(p.element.left)+"px"),("both"==v||"horizontal"==v)&&(n.scrollTop=s(p.element.top)+"px"),_.animate(n,{duration:i.duration||"slow",easing:i.easing||"swing",complete:i.complete})):t.isFunction(i.complete)&&i.complete.call(this.element)}}),t.expr[":"].scrollable=t.expr.createPseudo(function(e){var e=e&&"undefined"!=e?e:"both";return function(i){var s=t(i),o=n.test(i.nodeName),r=s.css(["overflow-x","overflow-y"]),l={x:"auto"==r["overflow-x"]||"scroll"==r["overflow-x"],y:"auto"==r["overflow-y"]||"scroll"==r["overflow-y"]},a=!1;return o||l.x||l.y?(("both"==e||"vertical"==e)&&(a=a||(l.x||o)&&i.scrollWidth>i.clientWidth),("both"==e||"horizontal"==e)&&(a=a||(l.y||o)&&i.scrollHeight>i.clientHeight),a):!1}}),t.propHooks.scrollTop=t.propHooks.scrollLeft={get:function(t,e){var i=null;return("HTML"===t.tagName||"BODY"===t.tagName)&&("scrollLeft"===e?i=window.scrollX:"scrollTop"===e&&(i=window.scrollY)),null==i&&(i=t[e]),i}},t.Tween.propHooks.scrollTop=t.Tween.propHooks.scrollLeft={get:function(e){return t.propHooks.scrollTop.get(e.elem,e.prop)},set:function(t){"HTML"===t.elem.tagName||"BODY"===t.elem.tagName?(t.options.bodyScrollLeft=t.options.bodyScrollLeft||window.scrollX,t.options.bodyScrollTop=t.options.bodyScrollTop||window.scrollY,"scrollLeft"===t.prop?t.options.bodyScrollLeft=Math.round(t.now):"scrollTop"===t.prop&&(t.options.bodyScrollTop=Math.round(t.now)),window.scrollTo(t.options.bodyScrollLeft,t.options.bodyScrollTop)):t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}}})(jQuery);